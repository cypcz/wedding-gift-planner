# Migration `20200919155448-authors`

This migration has been generated by Jakub at 9/19/2020, 5:54:48 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."GuestStatus" AS ENUM ('WAITING', 'ACCEPTED', 'REJECTED')

CREATE TABLE "public"."User" (
"id" text   NOT NULL ,
"email" text   NOT NULL ,
"weddingId" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Guest" (
"id" text   NOT NULL ,
"firstName" text   NOT NULL ,
"lastName" text   NOT NULL ,
"plusX" integer   NOT NULL DEFAULT 0,
"plusGuests" text []  ,
"guestLink" text   NOT NULL ,
"status" "GuestStatus"  NOT NULL DEFAULT E'WAITING',
"weddingId" text   NOT NULL ,
"userId" text   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Wedding" (
"id" text   NOT NULL ,
"partner1Name" text   NOT NULL ,
"partner2Name" text   NOT NULL ,
"date" timestamp(3)   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Gift" (
"id" text   NOT NULL ,
"name" text   NOT NULL ,
"weddingId" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

ALTER TABLE "public"."User" ADD FOREIGN KEY ("weddingId")REFERENCES "public"."Wedding"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Guest" ADD FOREIGN KEY ("weddingId")REFERENCES "public"."Wedding"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Guest" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Gift" ADD FOREIGN KEY ("weddingId")REFERENCES "public"."Wedding"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200913184444-init..20200919155448-authors
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource postgresql {
-  url = "***"
+  url = "***"
   provider = "postgresql"
 }
 generator client {
@@ -42,11 +42,11 @@
   partner1Name String
   partner2Name String
   date         DateTime
-  gifts  Gift[]
-  guests Guest[]
-  users  User[]
+  gifts   Gift[]
+  guests  Guest[]
+  authors User[]
 }
 model Gift {
   id   String @id @default(cuid())
```


