# Migration `20201101203534-single-contributor-per-contribution`

This migration has been generated by Jakub at 11/1/2020, 9:35:34 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."_GiftContributionToGuest" DROP CONSTRAINT "_GiftContributionToGuest_A_fkey"

ALTER TABLE "public"."_GiftContributionToGuest" DROP CONSTRAINT "_GiftContributionToGuest_B_fkey"

ALTER TABLE "public"."GiftContribution" ADD COLUMN "contributorId" text   NOT NULL 

ALTER TABLE "public"."GiftContribution" ADD FOREIGN KEY ("contributorId")REFERENCES "public"."Guest"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."_GiftContributionToGuest"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201101191728-price-to-float..20201101203534-single-contributor-per-contribution
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource postgresql {
-  url = "***"
+  url = "***"
   provider = "postgresql"
 }
 generator client {
@@ -68,11 +68,12 @@
   amount   Int
   currency Currency
   note     String?
-  contributors Guest[]
-  gift         Gift    @relation(fields: [giftId], references: [id])
-  giftId       String
+  contributor   Guest  @relation(fields: [contributorId], references: [id])
+  contributorId String
+  gift          Gift   @relation(fields: [giftId], references: [id])
+  giftId        String
 }
 model Gift {
   id          String   @id @default(cuid())
```


